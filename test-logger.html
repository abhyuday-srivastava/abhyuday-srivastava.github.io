<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Test Visitor Logger</title>
</head>
<body>
  <h1>Visitor Logger Test (Apps Script Proxy)</h1>
  <p>Open console to check logging.</p>

  <script>
    // Replace with your deployed Apps Script Web App URL
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzsJ5jRMA_Or5K665hjDQOHfWhXcx9C4NFq7qEAx6jsYRczCAs8FM-4J6kd9y21IeC-jA/exec";

    async function logVisitor() {
      try {
        const visitorInfo = {
          url: window.location.href,
          referrer: document.referrer || "Direct",
          userAgent: navigator.userAgent,
          language: navigator.language,
          platform: navigator.platform,
          screen: {
            width: window.screen.width,
            height: window.screen.height,
          },
          timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
          online: navigator.onLine,
          cookiesEnabled: navigator.cookieEnabled,
          timestamp: new Date().toISOString()
        };

        console.log("Sending visitor info:", visitorInfo);

        const res = await fetch(SCRIPT_URL, {
          method: "POST",
          mode: "cors",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(visitorInfo)
        });

        const data = await res.json();
        console.log("✅ Server response:", data);
      } catch (err) {
        console.error("⚠️ Error logging visitor:", err);
      }
    }

    logVisitor();
  </script>
</body>
</html>
