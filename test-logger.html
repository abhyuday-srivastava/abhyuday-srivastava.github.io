<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Test Visitor Logger</title>
</head>
<body>
  <h1>Visitor Logger Test (Option 2)</h1>
  <p>Open console to see logging status.</p>

  <script>
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyJ5LSnJN-XHZSLcWkXFSBkAVljQVf8IIb2YL9CZ8Iq4lza7ZgQsjzRUskEgJAG59uPmQ/exec"; // replace

    async function logVisitor() {
      try {
        const visitorInfo = {
          url: window.location.href,
          referrer: document.referrer || "Direct",
          userAgent: navigator.userAgent,
          language: navigator.language,
          platform: navigator.platform,
          screen: {
            width: window.screen.width,
            height: window.screen.height
          },
          timezone: Intl.DateTimeFormat().resolvedOptions().timeZone
        };

        console.log("Sending visitor info:", visitorInfo);

        const res = await fetch(SCRIPT_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(visitorInfo)
        });

        const data = await res.json();
        console.log("✅ Server response:", data);
      } catch (err) {
        console.error("⚠️ Error logging visitor:", err);
      }
    }

    // Auto-run on page load
    window.addEventListener("load", logVisitor);
  </script>
</body>
</html>
